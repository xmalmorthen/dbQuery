$slumber={session:{vars:{IDLE_TIMEOUT:null,_localStorageKey:"global_countdown_last_reset_timestamp",_idleSecondsTimer:null,_lastResetTimeStamp:(new Date).getTime(),_localStorage:null},init:function(e=60){$slumber.session.vars.IDLE_TIMEOUT=e,$slumber.session.fncs.AttachEvent(document,"click",$slumber.session.fncs.ResetTime),$slumber.session.fncs.AttachEvent(document,"mousemove",$slumber.session.fncs.ResetTime),$slumber.session.fncs.AttachEvent(document,"keypress",$slumber.session.fncs.ResetTime),$slumber.session.fncs.AttachEvent(window,"load",$slumber.session.fncs.ResetTime),$slumber.session.fncs.AttachEvent(window,"beforeunload",$slumber.session.fncs.Terminate),$slumber.session.fncs.AttachEvent(window,"beforeunload",$slumber.window.fncs.Terminate);try{$slumber.session.vars._localStorage=window.localStorage,$slumber.session.fncs.ResetTime()}catch(e){}$slumber.session.vars._idleSecondsTimer=window.setInterval($slumber.session.fncs.CheckIdleTime,1e3)},fncs:{GetLastResetTimeStamp:()=>(lastResetTimeStamp=0,$slumber.session.vars._localStorage?(lastResetTimeStamp=parseInt($slumber.session.vars._localStorage[$slumber.session.vars._localStorageKey],10),(isNaN(lastResetTimeStamp)||lastResetTimeStamp<0)&&(lastResetTimeStamp=(new Date).getTime())):lastResetTimeStamp=$slumber.session.vars._lastResetTimeStamp,lastResetTimeStamp),SetLastResetTimeStamp:e=>{$slumber.session.vars._localStorage?$slumber.session.vars._localStorage[$slumber.session.vars._localStorageKey]=e:$slumber.session.vars._lastResetTimeStamp=e},ResetTime:()=>{$slumber.session.fncs.SetLastResetTimeStamp((new Date).getTime())},AttachEvent:(e,s,t)=>e.addEventListener?(e.addEventListener(s,t,!1),!0):!!e.attachEvent&&(e.attachEvent("on"+s,t),!0),DeAttachEvent:(e,s,t)=>e.removeEventListener?(e.removeEventListener(s,t,!1),!0):!!e.detachEvent&&(e.detachEvent("on"+s,t),!0),Terminate:()=>{window.clearInterval($slumber.session.vars._idleSecondsTimer),$slumber.session.fncs.ResetTime(),$slumber.session.vars._localStorage.removeItem($slumber.session.vars._localStorageKey),$slumber.session.fncs.DeAttachEvent(document,"click",$slumber.session.fncs.ResetTime),$slumber.session.fncs.DeAttachEvent(document,"mousemove",$slumber.session.fncs.ResetTime),$slumber.session.fncs.DeAttachEvent(document,"keypress",$slumber.session.fncs.ResetTime),$slumber.session.fncs.DeAttachEvent(window,"load",$slumber.session.fncs.ResetTime),$slumber.session.fncs.DeAttachEvent(window,"beforeunload",$slumber.session.fncs.Terminate),$slumber.session.fncs.DeAttachEvent(window,"beforeunload",$slumber.window.fncs.Terminate)},WriteProgress:e=>{oPanel=document.getElementById("SecondsUntilExpire"),oPanel&&(oPanel.innerHTML=e)},CheckIdleTime:async()=>{currentTimeStamp=(new Date).getTime(),lastResetTimeStamp=$slumber.session.fncs.GetLastResetTimeStamp(),secondsDiff=Math.floor((currentTimeStamp-lastResetTimeStamp)/1e3),secondsDiff<=0&&($slumber.session.fncs.ResetTime(),secondsDiff=0),$slumber.session.fncs.WriteProgress($slumber.session.vars.IDLE_TIMEOUT-secondsDiff+""),secondsDiff>=$slumber.session.vars.IDLE_TIMEOUT&&(await new Promise(e=>{$slumber.session.fncs.Terminate(),e(!0)}),document.location.href=siteUrl+"UserSession/Expired")}}},window:{vars:{IDLE_TIMEOUT:null,_localStorageKey:"window_countdown_last_reset_timestamp",_idleSecondsTimer:null,_lastResetTimeStamp:(new Date).getTime(),_localStorage:null},init:function(e=60){$slumber.window.vars.IDLE_TIMEOUT=e,$slumber.window.fncs.AttachEvent(document,"click",$slumber.window.fncs.ResetTime),$slumber.window.fncs.AttachEvent(document,"mousemove",$slumber.window.fncs.ResetTime),$slumber.window.fncs.AttachEvent(document,"keypress",$slumber.window.fncs.ResetTime),$slumber.window.fncs.AttachEvent(window,"load",$slumber.window.fncs.ResetTime),$slumber.window.fncs.AttachEvent(window,"beforeunload",$slumber.window.fncs.Terminate);try{$slumber.window.vars._localStorage=window.localStorage,$slumber.window.fncs.ResetTime()}catch(e){}$slumber.window.vars._idleSecondsTimer=window.setInterval($slumber.window.fncs.CheckIdleTime,1e3)},fncs:{GetLastResetTimeStamp:()=>(lastResetTimeStamp=0,$slumber.window.vars._localStorage?(lastResetTimeStamp=parseInt($slumber.window.vars._localStorage[$slumber.window.vars._localStorageKey],10),(isNaN(lastResetTimeStamp)||lastResetTimeStamp<0)&&(lastResetTimeStamp=(new Date).getTime())):lastResetTimeStamp=$slumber.window.vars._lastResetTimeStamp,lastResetTimeStamp),SetLastResetTimeStamp:e=>{$slumber.window.vars._localStorage?$slumber.window.vars._localStorage[$slumber.window.vars._localStorageKey]=e:$slumber.window.vars._lastResetTimeStamp=e},ResetTime:()=>{$slumber.window.fncs.SetLastResetTimeStamp((new Date).getTime())},AttachEvent:(e,s,t)=>e.addEventListener?(e.addEventListener(s,t,!1),!0):!!e.attachEvent&&(e.attachEvent("on"+s,t),!0),DeAttachEvent:(e,s,t)=>e.removeEventListener?(e.removeEventListener(s,t,!1),!0):!!e.detachEvent&&(e.detachEvent("on"+s,t),!0),Terminate:()=>{window.clearInterval($slumber.window.vars._idleSecondsTimer),$slumber.window.fncs.ResetTime(),$slumber.window.vars._localStorage.removeItem($slumber.window.vars._localStorageKey),$slumber.window.fncs.DeAttachEvent(document,"click",$slumber.window.fncs.ResetTime),$slumber.window.fncs.DeAttachEvent(document,"mousemove",$slumber.window.fncs.ResetTime),$slumber.window.fncs.DeAttachEvent(document,"keypress",$slumber.window.fncs.ResetTime),$slumber.window.fncs.DeAttachEvent(window,"load",$slumber.window.fncs.ResetTime),$slumber.window.fncs.DeAttachEvent(window,"beforeunload",$slumber.window.fncs.Terminate)},WriteProgress:e=>{oPanel=document.getElementById("SecondsUntilExpire"),oPanel&&(oPanel.innerHTML=e)},CheckIdleTime:async()=>{currentTimeStamp=(new Date).getTime(),lastResetTimeStamp=$slumber.window.fncs.GetLastResetTimeStamp(),secondsDiff=Math.floor((currentTimeStamp-lastResetTimeStamp)/1e3),secondsDiff<=0&&($slumber.window.fncs.ResetTime(),secondsDiff=0),$slumber.window.fncs.WriteProgress($slumber.window.vars.IDLE_TIMEOUT-secondsDiff+""),secondsDiff>=$slumber.window.vars.IDLE_TIMEOUT&&(await new Promise(e=>{$slumber.window.fncs.Terminate(),e(!0)}),Swal.fire({type:"info",title:"Inactividad",html:"Formulario cerrado por inactividad",confirmButtonText:"Aceptar"}).then(()=>{document.location.href=0!=$(".btnRegresar").length?$(".btnRegresar").first().attr("href"):$(".btnListado").first().attr("href")}))}}}};